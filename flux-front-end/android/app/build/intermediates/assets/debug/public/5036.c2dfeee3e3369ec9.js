"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[5036],{5036:(I,f,a)=>{a.r(f),a.d(f,{CodigoAutenticacaoPageModule:()=>b});var h=a(177),g=a(4341),l=a(9465),u=a(897),m=a(467),C=a(8866),t=a(3953),v=a(3484),x=a(8819),P=a(2872);const y=[{path:"",component:(()=>{var n;class s{constructor(o,e,i,c,r){this.tran=o,this.pixService=e,this.router=i,this.navCtrl=c,this.toastController=r,this.email="",this.token=null,this.id="",this.code="",this.key=""}ngOnInit(){this.decodeToken();const o=localStorage.getItem("id_pix");o?(this.id=o,console.log("ID do Pix recuperado:",this.id)):console.warn("ID do Pix n\xe3o encontrado no localStorage.");const e=localStorage.getItem("token");e?(this.token=e,this.pixService.getChavePix(this.token).subscribe(i=>{this.key=i.key,console.log("Chave Pix recebida:",this.key)},i=>{console.error("Erro ao buscar chave Pix:",i)})):console.warn("Token n\xe3o encontrado no localStorage.")}decodeToken(){const o=localStorage.getItem("token");if(this.token=o,o)try{const e=(0,C.s)(o);e&&e.email&&(this.email=e.email)}catch(e){console.error("Erro ao decodificar o token:",e)}}ngAfterViewInit(){console.log("ngAfterViewInit chamado"),this.setupCodeInputHandler()}getCodeFromInputs(){const o=document.querySelectorAll(".input-codigo input");let e="";return console.log(o),o.forEach(i=>{e+=i.value}),e}setupCodeInputHandler(){const o=document.querySelectorAll(".input-codigo input");o.forEach((e,i)=>{e.addEventListener("input",c=>{1===c.target.value.length&&(i<o.length-1?o[i+1].focus():this.getCodeFromInputs().length===o.length&&this.verifyCode(new Event("submit")))}),e.addEventListener("keydown",c=>{"Backspace"===c.key&&""===e.value&&i>0&&o[i-1].focus()})})}presentToast(o){var e=this;return(0,m.A)(function*(){(yield e.toastController.create({message:o,duration:5e3,position:"bottom",cssClass:"toast-container"})).present()})()}verifyCode(o){if(o.preventDefault(),console.log("verify code chamado"),this.getCodeFromInputs()&&this.token&&null!==this.id){const i=this.id,c=this.token,r=this.getCodeFromInputs();console.log(r),console.log(c),console.log(i),this.pixService.verifyCode(i,c,r).subscribe(p=>{const M={id:i,token:c,code:r};this.presentToast("C\xf3digo correto!"),this.navCtrl.navigateForward("/confirmacao-autenticacao",{queryParams:{data:JSON.stringify(M)}})},p=>{console.error("Erro ao verificar c\xf3digo:",p)})}else console.warn("C\xf3digo, token ou id_pix ausente.")}resendCode(){this.token&&this.id?(console.log("Reenviando o c\xf3digo..."),this.pixService.resendCode(this.id,this.token,this.code).subscribe(o=>{console.log("C\xf3digo reenviado com sucesso:",o)},o=>{console.error("Erro ao reenviar o c\xf3digo:",o)})):console.warn("Token ou ID ausente. N\xe3o foi poss\xedvel reenviar o c\xf3digo.")}}return(n=s).\u0275fac=function(o){return new(o||n)(t.rXU(v.S),t.rXU(x.x),t.rXU(u.Ix),t.rXU(P.q9),t.rXU(l.K_))},n.\u0275cmp=t.VBU({type:n,selectors:[["app-codigo-autenticacao"]],decls:23,vars:1,consts:[[1,"login-container"],[1,"logo-container"],["src","assets/image/Emblema pelos seus 10 designs criados no Canva.png","alt","Logo",1,"logo"],["id","codigo-form"],[1,"input-codigo"],["type","text","maxlength","1","inputmode","numeric"],["type","button",1,"verificar-btn"],[1,"forgot-password"],[3,"click"]],template:function(o,e){1&o&&(t.j41(0,"ion-content")(1,"div",0)(2,"div",1),t.nrm(3,"img",2),t.k0s(),t.j41(4,"h1"),t.EFF(5,"Cheque sua chave!"),t.k0s(),t.j41(6,"p"),t.EFF(7),t.k0s(),t.j41(8,"form",3)(9,"div",4),t.nrm(10,"input",5)(11,"input",5)(12,"input",5)(13,"input",5)(14,"input",5)(15,"input",5),t.k0s(),t.j41(16,"button",6),t.EFF(17,"Verificar"),t.k0s()(),t.j41(18,"p",7),t.EFF(19,"N\xe3o recebeu seu c\xf3digo? "),t.j41(20,"strong")(21,"a",8),t.bIt("click",function(){return e.resendCode()}),t.EFF(22,"Clique aqui"),t.k0s()()()()()),2&o&&(t.R7$(7),t.SpI("N\xf3s enviamos um c\xf3digo de verifica\xe7\xe3o para ",e.key,"!"))},dependencies:[g.qT,g.cb,g.cV,l.W9],styles:["body[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;background-color:#000;margin:0;display:flex;justify-content:center;align-items:center;height:100vh}.login-container[_ngcontent-%COMP%]{padding:20px;width:90%;max-width:400px}.logo-container[_ngcontent-%COMP%]{display:flex;justify-content:center}.logo[_ngcontent-%COMP%]{width:100px;margin-bottom:20px}h1[_ngcontent-%COMP%]{font-size:24px;color:#dedede;margin-bottom:10px}p[_ngcontent-%COMP%]{color:#adadad;font-size:16px;margin-bottom:50px}.input-codigo[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.input-codigo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:45px;height:45px;text-align:center;font-size:24px;border:2px solid #001293;border-radius:10px;background-color:#171c1c;margin-right:5px}.input-codigo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:last-child{margin-right:0}.input-codigo[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#001293;background-color:#000}button[_ngcontent-%COMP%]{font-family:Poppins,sans-serif;font-weight:600;width:100%;padding:20px;font-size:18px;background-color:#92d1f9;color:#000;border:none;margin-top:30px;border-radius:50px;cursor:pointer}.forgot-password[_ngcontent-%COMP%]{font-size:14px;color:#cfcfcf;margin-top:10px}.forgot-password[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#009cff;text-decoration:none}.toast-container[_ngcontent-%COMP%]{background-color:#0a9c5f;color:#fff;font-family:Poppins,sans-serif;padding:12px 16px;border-radius:8px;box-shadow:0 2px 10px #00000080;position:fixed;left:50%;transform:translate(-50%);bottom:20px;width:90%;max-width:400px;text-align:center;z-index:1000}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(100%)}to{transform:translateY(0)}}.toast-container.show[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .5s ease-out}"]}),s})()}];let k=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[u.iI.forChild(y),u.iI]}),s})(),b=(()=>{var n;class s{}return(n=s).\u0275fac=function(o){return new(o||n)},n.\u0275mod=t.$C({type:n}),n.\u0275inj=t.G2t({imports:[h.MD,g.YN,l.bv,k]}),s})()}}]);